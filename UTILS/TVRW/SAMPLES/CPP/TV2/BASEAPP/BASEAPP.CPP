/**************************************************************************
  BASEAPP.CPP, MyApp Main module

  Copyright (C) 1996 BitSoft Development, L.L.C.

  Generated by Turbo Vision Resource WorkShop
***************************************************************************/

#define Uses_TApplication
#define Uses_TKeys
#define Uses_TRect
#define Uses_TMenuBar
#define Uses_TSubMenu
#define Uses_TMenuItem
#define Uses_TStatusLine
#define Uses_TStatusItem
#define Uses_TStatusDef
#define Uses_TDeskTop
#define Uses_TButton
#define Uses_TLabel
#define Uses_TStaticText
#define Uses_TParamText
#define Uses_TMemo
#define Uses_TListBox
#define Uses_TSItems
#define Uses_TSortedListBox
#define Uses_TScrollBar
#define Uses_THistory
#define Uses_TInputLine
#define Uses_TCheckBoxes
#define Uses_TRadioButtons
#define Uses_TSItem
#define Uses_TMultiCheckBoxes
#define Uses_TPXPictureValidator
#define Uses_TStringCollection
#define Uses_TStringLookupValidator
#define Uses_TRangeValidator
#define Uses_TDialog
#define Uses_TResourceFile
#define Uses_TStringList
#define Uses_TStrListMaker
#define Uses_fpstream

#include <tvision\tv.h>

/* Include constants file */
#include "types.h"

__link(RButton);
__link(RLabel);
__link(RStaticText);
__link(RParamText);
__link(RMemo);
__link(RListBox);
__link(RSortedListBox);
__link(RScrollBar);
__link(RHistory);
__link(RInputLine);
__link(RCheckBoxes);
__link(RRadioButtons);
__link(RPXPictureValidator);
__link(RStringCollection);
__link(RStringLookupValidator);
__link(RRangeValidator);
__link(RDialog);
__link(RMenuBar);
__link(RMenuBox);
__link(RStatusLine);
__link(RResourceCollection);


char resFileName[] = "MYAPP.RES";

TResourceFile *resFile;

// application definition...
class TMyApp : public TApplication
{

public:
    TMyApp();
	 virtual ~TMyApp();
    virtual void handleEvent(TEvent &);
    static TStatusLine *initStatusLine( TRect r );
    static TMenuBar *initMenuBar( TRect r );
};

// application constructor
TMyApp::TMyApp() :
    TProgInit(&TMyApp::initStatusLine,
         &TMyApp::initMenuBar,
         &TMyApp::initDeskTop)
{
}

// application destructor
TMyApp::~TMyApp()
{
}

void TMyApp::handleEvent(TEvent &event)
{
    TApplication::handleEvent(event);
    switch (event.what) {
		/* Add event handler for About Box */
		case evCommand: {
			switch (event.message.command) {
				case cmAbout: {
					TDialog *dlg=(TDialog *)
						resFile->get("AboutBox");
					deskTop->execView(dlg);
					clearEvent( event );
					break;
				}
			}
		}
	 }
}

TStatusLine *TMyApp::initStatusLine(TRect r)
{
	 return (TStatusLine *) resFile->get("SampleStatus");
}

TMenuBar *TMyApp::initMenuBar( TRect r )
{
    return (TMenuBar *) resFile->get("SampleMenu");
}

int main()
{
    resFile = new TResourceFile(new fpstream(resFileName, ios::in|ios::binary));
    TMyApp MyApp;
    if(MyApp.valid(cmValid))
        MyApp.run();
    MyApp.shutDown();
    TObject::destroy(resFile);
    return 0;
}
